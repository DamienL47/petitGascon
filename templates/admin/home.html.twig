{% extends 'admin/base.html.twig' %}

{% block title %} Tableau de bord {% endblock %}

{% block header %}
    <div class="bandeau">
        <h1>Bienvenue {{ app.user.prenom }}</h1>
        <a href="{{ path('app_logout') }}">DÃ©connexion</a>
    </div>
    <div class="dashboard">
        <nav class="navBarAdmin">
            <a class="onglet" href="{{ path('home') }}">ğŸšª  Accueil du site</a>
            <a class="onglet" href="{{ path('admin_dashboard')}}">ğŸ   Tableau de bord </a>
            <a class="onglet" href="{{ path('admin_app_menu_new')}}"> ğŸ“  CrÃ©er un menu</a>
            <a class="onglet" href="{{ path('admin_list')}}">ğŸ“–  Liste des admins</a>
            <a class="onglet" href="{{ path('admin_app_menu_index')}}">ğŸ“–  Liste des menus</a>
            <a class="onglet" href="{{ path('admin_app_met_index')}}">ğŸ“–  Liste des plats</a>
            <a class="onglet" href="{{ path('admin_app_category_index')}}">ğŸ“–  Liste des catÃ©gories</a>
            <a class="onglet" href="{{ path('admin_create_admin')}}">ğŸ‘”  Nouvel Admin</a>
            <a class="onglet" href="{{ path('admin_app_met_new')}}">ğŸ½  Ajouter un plat</a>
            <a class="onglet" href="{{ path('admin_app_category_new')}}">+  Ajouter une catÃ©gorie</a>
            <a class="onglet" href="{{ path('liste_demande_contact')}}">Voir toutes les demandes de contact</a>
        </nav>
    </div>
{% endblock %}

{% block main %}
    <section class="content">
        <h2>Tableau de bordï¸</h2>

        <h3>Vos demandes de rÃ©servations Ã  traiter</h3>
        <div class="listContact">
            <table class="table">
                <thead>
                <tr class="tableau">
                    <th>Id</th>
                    <th>Nom</th>
                    <th>PrÃ©nom</th>
                    <th>Tel</th>
                    <th>Email</th>
                    <th>Date de rÃ©servation</th>
                    <th>Nombre de personne</th>
                    <th>Message</th>
                    <th>Gestion rÃ©sas</th>
                </tr>
                </thead>
                <tbody>
                {% for reservation in reservations %}
                        <tr class="tableau">
                            <td>{{ reservation.id }}</td>
                            <td>{{ reservation.nom }}</td>
                            <td>{{ reservation.prenom }}</td>
                            <td>{{ reservation.tel }}</td>
                            <td>{{ reservation.email }}</td>
                            <td>{{ reservation.dateReservation ? reservation.dateReservation|date('Y-m-d') : '' }}</td>
                            <td>{{ reservation.nbPersonnes }}</td>
                            <td>{{ reservation.contraintes }}</td>
                            <td> Ã  developper </td>
                        </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <h3>Vos demandes de contact Ã  traiter</h3>

        <div class="listContact">
            <table class="table">
                <thead>
                <tr class="tableau">
                    <th>Id</th>
                    <th>Nom</th>
                    <th>PrÃ©nom</th>
                    <th>Tel</th>
                    <th>Email</th>
                    <th>Sujet</th>
                    <th>Message</th>
                    <th>Date du message</th>
                    <th>Lu</th>
                </tr>
                </thead>
                <tbody>
                {% for contact in contact %}
                    {% if not contact.lu %}
                        <tr class="tableau">
                            <td>{{ contact.id }}</td>
                            <td>{{ contact.nom }}</td>
                            <td>{{ contact.prenom }}</td>
                            <td>{{ contact.tel }}</td>
                            <td><a href="mailto:{{ contact.email }}">{{ contact.email }}</a></td>
                            <td>{{ contact.sujet }}</td>
                            <td>{{ contact.message }}</td>
                            <td>{{ contact.createdAt ? contact.createdAt|date('Y-m-d') : '' }}</td>
                            <td>
                                <a href="{{path('admin_dashboard_contact', { id: contact.id }) }}">Marquer comme lu</a>
                            </td>
                        </tr>
                    {% endif %}
                {% endfor %}
                </tbody>
            </table>
        </div>
    </section>
{% endblock %}

